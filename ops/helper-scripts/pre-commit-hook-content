
# Check the branch name for compatibility with Jira tickets
local_branch="$(git rev-parse --abbrev-ref HEAD)"
may_be_cams_regex="^[cC][aA][mM][sS].*$"
preferred_branch_prefix_regex="^CAMS-[0-9]+-.*$"

message="In order for Jira to associate your branch name with a ticket, the branch name must start with 'CAMS-' followed by the ticket number. You should rename your branch to a valid name and try again."
branch_accepted=false

if [[ $local_branch =~ $may_be_cams_regex ]]
then
    if [[ $local_branch =~ $preferred_branch_prefix_regex ]]
    then
        branch_accepted=true
    else
        branch_accepted=false
    fi
else
    branch_accepted=true
fi

if [[ $branch_accepted == false ]]
then
    echo $message
    exit 1
fi


# Below content generated by pre-commit: https://pre-commit.com
